<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<title>Geometry Dash Mini</title>
<style>
  body {
    margin: 0;
    background: #000;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }
  canvas {
    background: linear-gradient(#111, #222);
  }
</style>
</head>
<body>

<canvas id="c" width="800" height="250"></canvas>

<script>
const c = document.getElementById("c");
const ctx = c.getContext("2d");

const groundY = 200;
let speed = 6;
let running = true;

const player = {
  x: 120,
  y: groundY - 30,
  size: 30,
  vy: 0,
  rot: 0
};

const gravity = 0.8;
const jump = -14;

let spikes = [];

function spawnSpike() {
  spikes.push({
    x: 800,
    size: 30
  });
}

function reset() {
  player.y = groundY - player.size;
  player.vy = 0;
  player.rot = 0;
  spikes = [];
  running = true;
}

document.addEventListener("keydown", e => {
  if (e.code === "Space") action();
});
c.addEventListener("click", action);

function action() {
  if (!running) {
    reset();
    return;
  }
  if (player.y >= groundY - player.size) {
    player.vy = jump;
  }
}

function update() {
  ctx.clearRect(0, 0, c.width, c.height);

  // ground
  ctx.fillStyle = "#0ff";
  ctx.fillRect(0, groundY, c.width, 5);

  if (running) {
    // physics
    player.vy += gravity;
    player.y += player.vy;
    player.rot += 0.15;

    if (player.y > groundY - player.size) {
      player.y = groundY - player.size;
      player.vy = 0;
    }

    // spawn spikes
    if (Math.random() < 0.02) spawnSpike();

    // move spikes
    spikes.forEach(s => s.x -= speed);
    spikes = spikes.filter(s => s.x > -50);

    // collision
    spikes.forEach(s => {
      if (
        player.x + player.size > s.x &&
        player.x < s.x + s.size &&
        player.y + player.size > groundY - s.size
      ) {
        running = false;
      }
    });
  }

  // draw player
  ctx.save();
  ctx.translate(player.x + 15, player.y + 15);
  ctx.rotate(player.rot);
  ctx.fillStyle = "#0ff";
  ctx.fillRect(-15, -15, 30, 30);
  ctx.restore();

  // draw spikes
  ctx.fillStyle = "#f00";
  spikes.forEach(s => {
    ctx.beginPath();
    ctx.moveTo(s.x, groundY);
    ctx.lineTo(s.x + s.size / 2, groundY - s.size);
    ctx.lineTo(s.x + s.size, groundY);
    ctx.closePath();
    ctx.fill();
  });

  if (!running) {
    ctx.fillStyle = "#fff";
    ctx.font = "28px Arial";
    ctx.fillText("GAME OVER", 310, 120);
    ctx.font = "16px Arial";
    ctx.fillText("SPACE / click = restart", 300, 150);
  }

  requestAnimationFrame(update);
}

update();
</script>

</body>
</html>
